# slider
![alt text](/docs/uml.png)

# Архитектура приложения
Приложение построено на основе идей и архетиктурный решений MVC. Контроллер заменен на презентер.

Слои:
+ Доменная модель
+ Представление

## Слой представления:
Разделен на презентер и вид. 

### Презентер
Реализует интерфейс ISliderPresenter.
Осуществляет обмен пакетами между видом и моделью, путем подписки на их события.

### Вид
Обозначения:
+ Точка - элемент, который перемещается по сладеру и помогает выбрать значение.
+ Слайдер - виджет для выбора значений, по которому перемещается точка.
+ Шкала - отображает соответствие размеров сладера определенными значениям.
+ Пакет состояния - пакет данных о сотоянии сладера и значении, который хочет задать пользователь.
+ Подсказка - элемент, расположеный рядом с точкой, и отображающий ее значение в текущей позиции, в соответствии со шкалой.

Реализует интерфейс ISliderView.
Задача вида взаимодействовать со структурой сладера в DOM и реагировать на события пользователя.
Вид умеет скрывать и показывать подсказки со значением точек, в заданных позициях.
Когда происходит какое либо взаимодействие со сладером, вид генерирует пакет состояния используя драйвер.
Пакет состояния имеет следующие поля:
+ Массив с объектами состояний точек. Позиция каждой точки представлена числом от 0 до 1, что бы абстрагироваться от внешних особенностей сладера.
+ Целевая возиция. Представлена, как и точка, от 0 до 1. Означает, что сюда пользователь хотел бы установить значение (например кликнул на сладере)
+ Тип точки. может быти 'min' или 'max' или null. Значения, отличные от null задаются если пользователь перетаскивает точку.

Когда виду передают пакет с состоянием, которое нужно установить, он использунт для этого драйвер.

#### Драйвер вида
Реализует интерфейс SliderViewDriver.
Предназначен для того, что бы абстрагироваться от внешних различий сладера (к примеру горизонтальный и вертикальный вид).
Предоставляет методы для получения позиций точек, типа выбранной точки(если пользователь взаимодействует с конкретной точкой) а также целевой позиции.


## Доменная модель
Основные элементы:
+ Менеджер данных.
+ Объекты бизнес-логики.
+ Библиотека функций общего назначения
+ Модель - внешнее api.

Доменная модель обрабатывает состояние абстрактного сладера. 
Абстрактный сладер состоит из следующих элементов:
+ Точка - обект, который установлен в некоторую позицию, которая находится в пределах диапазона сладера.
+ Диапазон значений сладера - величина от 0 до N, где N - число, вычисляемое на основе шкалы и шага.
+ Шкала - набор значений, которые могут быть установлены на сладере (может быть либо диапазоном чисел, либо массивом строк)
+ Шаг - величина, действительная только для шкалы с диапазоном числел. Используется для получения значений точек.

Диапазон значений сладера вычисляется по следующим формулам:
+ Для массива: (длинна массива - 1).
+ Для диапазона чисел: ((максимальное значение - минимальное значение) / шаг). Округляется в меньшую сторону для нецелых чисел, что бы не было выхода за диапазон шкалы.

### Менеджер данных
Реализует интерфейс ISliderModelDataManager.
Педоставляет доступ к данным:
+ Шаг
+ Шкала
+ Диапазон значений сладера
+ Позиции точек - массив из чисел диапазона значений сладера

### Объекты бизнес-логики

#### Обработчик состояния
Реализует интерфейс ISliderModelStateHandler.
Выполняет 2 функции:
+ Обрабатывает входящие пакеты данных, предназначенные для установки значений и обновляет данные доменной модели через менеджер данных
+ Формирует пакет о сотоянии доменного сладера

### Библиотека функций общего назначения
Содержит общие функции, которые использует модель.

### Модель
Реализует интерфейс ISliderModel.
Предоставляет внешний интерфейс к функционалу доменной модели. Оповещает слушателей об обновлении модели.


## Обмен данными между слоями
Что бы добиться наибольшей изолированности слоев, пакеты обмена данными должны соответствовать определенным параметрам.
В этих пакетах сладер представляется в виде диапазона чисел от 0 до 1. Любые другие параметры, относящиеся к позиции на сладере, должны быть преобразованы в этот диапазон.

Пакет, который генерирует вид, должен реализовывать интерфейс SliderViewStateData.

Пакет с состоянием доменной модели, должен реализовывать интерфейс SliderModelPointsState. По сути он представляет массив объектов, которые описывают состояние точек домменой модели. Каждый такой объект имеет обязательное поле с позицией точки в виде числа от 0 до 1. Так же есть необязательное поле с соответствующим это позиции значением на шкале сладера. Третье поле необязательно и содержит имя точки (поле зарезервировано для дополнительного функционала).